# See https://github.com/dotnet/arcade/blob/e52018a/Documentation/Maestro/New-Inter-Branch-Merge-Approach.md

name: Branch merge
on:
  workflow_dispatch:
    inputs:
      configuration_file_branch:
        description: 'Branch to use for configuration file'
        required: true
        default: 'main'
      configuration_file_name:
        description: 'Configuration file in eng/config to use to run the merge'
        required: true
        default: 'feature-branch-merge.jsonc'

permissions:
  contents: write
  pull-requests: write

jobs:
  merge:
    if: github.repository == 'dotnet/roslyn'
    uses: dotnet/arcade/.github/workflows/inter-branch-merge-base.yml@main
    with:
      configuration_file_path: 'eng/config/${{ inputs.configuration_file_name }}'
      configuration_file_branch: ${{ inputs.configuration_file_branch || 'main' }}